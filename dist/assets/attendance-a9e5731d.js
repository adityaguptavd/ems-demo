import{j as e,P as r,B as I,ah as j,F as M,aa as O,v as W,r as l,a5 as B,S as C,T as b,av as D,W as H}from"./index-8ec84c2e.js";import{T as g,a as u,b as L,c as $,d as q,e as Q,f as _,g as z}from"./TableSortLabel-ffdc8a2f.js";import{C as G}from"./Container-9125bcc9.js";import{C as J}from"./Card-9ed39c6a.js";import"./Select-1317b73c.js";function f({emptyRows:n,height:a}){return n?e.jsx(g,{sx:{...a&&{height:a*n}},children:e.jsx(u,{colSpan:9})}):null}f.propTypes={emptyRows:r.number,height:r.number};const K={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function N(n,a,i){return n?Math.max(0,a-i):0}function S({order:n,orderBy:a,headLabel:i,onRequestSort:o}){const c=t=>d=>{o(d,t)};return e.jsx(L,{children:e.jsx(g,{children:i.map(t=>e.jsx(u,{align:t.align||"left",sortDirection:a===t.id?n:!1,sx:{width:t.width,minWidth:t.minWidth},children:e.jsxs($,{hideSortIcon:!0,active:a===t.id,direction:a===t.id?n:"asc",onClick:c(t.id),children:[t.label,a===t.id?e.jsx(I,{sx:{...K},children:n==="desc"?"sorted descending":"sorted ascending"}):null]})},t.id))})})}S.propTypes={order:r.oneOf(["asc","desc"]),orderBy:r.string,headLabel:r.array,onRequestSort:r.func};function T({date:n,status:a,daySalary:i,entryExitTime:o}){let c="",t="";return o.forEach((d,h)=>{h%2===0?t+=`${j(d)} `:h%2!==0&&(c+=`${j(d)} `)}),e.jsxs(g,{hover:!0,tabIndex:-1,children:[e.jsx(u,{component:"th",scope:"row",padding:"none",children:M(n,"dd/MM/yyyy")}),e.jsx(u,{children:a}),e.jsx(u,{children:i.toFixed(2)}),e.jsx(u,{children:c===""?"-":c}),e.jsx(u,{children:t===""?"-":t})]})}T.propTypes={date:r.any,status:r.string,daySalary:r.number,entryExitTime:r.array};function U(){const{id:n,name:a}=O(),i=W(s=>s.user.token),[o,c]=l.useState([]),[t,d]=l.useState(0),[h,P]=l.useState("asc"),[y,w]=l.useState("name"),[x,v]=l.useState(5),[A,E]=l.useState(0),{data:m}=B({token:i,id:n,page:t,rowsPerPage:x}),R=(s,p)=>{p!==""&&(P(y===p&&h==="asc"?"desc":"asc"),w(p))},k=(s,p)=>{d(p)},F=s=>{d(0),v(parseInt(s.target.value,10))};return l.useEffect(()=>{m&&(c(m.attendance),E(m.total))},[m]),e.jsxs(G,{children:[e.jsxs(C,{direction:"column",spacing:1,mb:5,children:[e.jsx(b,{variant:"h4",children:"Attendance"}),e.jsx(b,{variant:"subtitle",children:a})]}),e.jsxs(J,{children:[e.jsx(D,{children:e.jsx(q,{sx:{overflow:"unset"},children:e.jsxs(Q,{sx:{minWidth:800},children:[e.jsx(S,{order:h,orderBy:y,rowCount:o.length,onRequestSort:R,headLabel:[{id:"date",label:"Date"},{id:"status",label:"Status"},{id:"daySalary",label:"Salary Added"},{id:"entry",label:"Entry"},{id:"exit",label:"Exit"}]}),e.jsxs(_,{children:[o.slice(t*x,t*x+x).map(s=>e.jsx(T,{date:s.date,status:s.status,daySalary:s.daySalary,entryExitTime:s.entryExitTime},s._id)),e.jsx(f,{height:60,emptyRows:N(t,x,o.length)})]})]})})}),e.jsx(z,{page:t,component:"div",count:A,rowsPerPage:x,onPageChange:k,rowsPerPageOptions:[5,10,25],onRowsPerPageChange:F})]})]})}function ae(){return e.jsxs(e.Fragment,{children:[e.jsx(H,{children:e.jsx("title",{children:" Attendance | Employee Management System "})}),e.jsx(U,{})]})}export{ae as default};
