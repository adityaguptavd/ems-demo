import{q as T,aG as P,w as L,b7 as O,r as s,b8 as B,j as e,B as R,b9 as F,o as z,S as v,T as G,al as M,ap as V,L as W,E as A,W as _}from"./index-19f9def9.js";import{v as q}from"./index-dc303613.js";import{C as D,I as H}from"./index-d0daa765.js";import{C as J}from"./Card-d7a06d0a.js";import{T as S}from"./TextField-9f356c4d.js";import"./isMuiElement-0a2d7d2d.js";function N(){const r=T(),c=P(),g=L(),[b,{error:a,data:n,isLoading:k}]=O(),[i,C]=s.useState(""),[l,w]=s.useState(""),[u,h]=s.useState(!0),[m,p]=s.useState(!0),[d,y]=s.useState(!1),x={open:!1,mssg:"",bgColor:r.palette.error.dark,anchorOrigin:{vertical:"top",horizontal:"right"}},[o,f]=s.useState(x),I=()=>{if(!q.isEmail(i)){h(!1);return}if(h(!0),l.length===0){p(!1);return}p(!0);const t=JSON.stringify({email:i,password:l});b({body:t})};s.useEffect(()=>{if(a){let t="";a.status==="FETCH_ERROR"?t="Server is not responding!":t=a.data.error,f({open:!0,mssg:t,bgColor:r.palette.error.dark,anchorOrigin:{vertical:"top",horizontal:"right"}}),console.error(a)}if(n){const{id:t,token:j}=n;c(B({id:t,token:j})),localStorage.setItem("id",t),localStorage.setItem("token",j),g.push("/")}},[a,n,g,r,c]);const E=e.jsxs(v,{spacing:6,children:[e.jsx(S,{name:"email",label:"Email address",value:i,helperText:!u&&"Invalid Email",error:!u,onChange:t=>{C(t.target.value)}}),e.jsx(S,{name:"password",label:"Password",type:d?"text":"password",value:l,helperText:!m&&"Invalid Password",error:!m,onChange:t=>{w(t.target.value)},InputProps:{endAdornment:e.jsx(H,{position:"end",children:e.jsx(M,{onClick:()=>y(!d),edge:"end",children:e.jsx(V,{icon:d?"eva:eye-fill":"eva:eye-off-fill"})})})}}),e.jsx(W,{loading:k,loadingIndicator:e.jsx(A,{}),fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"inherit",onClick:I,children:"Login"})]});return e.jsxs(R,{sx:{...F({color:z(r.palette.background.default,.9),imgUrl:"/assets/background/overlay_4.jpg"}),height:1},children:[e.jsx(D,{open:o.open,mssg:o.mssg,bgColor:o.bgColor,closeSnackbar:()=>{f(x)},severity:"error",anchorOrigin:o.anchorOrigin}),e.jsx(v,{alignItems:"center",justifyContent:"center",sx:{height:1},children:e.jsxs(J,{sx:{p:5,width:1,maxWidth:420},children:[e.jsx(G,{variant:"h4",gutterBottom:!0,children:"Sign in"}),E]})})]})}function $(){return e.jsxs(e.Fragment,{children:[e.jsx(_,{children:e.jsx("title",{children:" Login | Employee Management System "})}),e.jsx(N,{})]})}export{$ as default};
